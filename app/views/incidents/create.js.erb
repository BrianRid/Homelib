// Here you generate *JavaScript* that would be executed in the browser
function replaceForm(innerHTML) {
  const formContainer = document.getElementById('incident-declaration-container');
  if (formContainer) {
    formContainer.innerHTML = innerHTML;
  }
}

<% if @next_decision %>
  replaceForm("<%= j render 'form', decision: @next_decision  %>");
  hideSubmitAnswers();
<% else %>
  const form = document.getElementById('new_incident');
  form.submit();
<% end %>




// function refreshForm(innerHTML) {
//   const newIncidentForm = document.getElementById('new_incident');
//   newIncidentForm.innerHTML = innerHTML;
// }

// function addIncident(incidentHTML) {
//   const incidents = document.getElementById('incidents');
//   incidents.insertAdjacentHTML('beforeend', incidentHTML);
// }

// <%# if @incident.errors.any? %>
//   refreshForm('<%#= j render "incidents/form", flat: @flat, incident: @incident %>');
// <%# else %>
//   addIncident('<%#= j render "incidents/show", incident: @incident %>');
//   refreshForm('<%#= j render "incidents/form", flat: @flat, incident: Incident.new %>');
// <%# end %>
